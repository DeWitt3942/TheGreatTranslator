!function(e){var t={extend:function(e,n){for(var r in n)"object"==typeof n[r]&&null!==n[r]?e[r]=t.extend(e[r]||{},n[r]):e[r]=n[r];return e},res_label:function(e){return/^\d+$/.test(e)?e+"p":e}};e.ResolutionMenuItem=e.MenuItem.extend({init:function(n,r){r.label=t.res_label(r.res),r.selected=r.res===n.getCurrentRes(),e.MenuItem.call(this,n,r),this.resolution=r.res,this.on("click",this.onClick),n.on("changeRes",e.bind(this,function(){this.resolution==n.getCurrentRes()?this.selected(!0):this.selected(!1)}))}}),e.ResolutionMenuItem.prototype.onClick=function(){var e=this.player(),n=e.currentTime(),r=e.paused(),s=e.controlBar.resolutionSelector.el().firstChild.children,o=s.length;if(e.getCurrentRes()!=this.resolution){for(e.src(e.availableRes[this.resolution]).one("loadedmetadata",function(){e.currentTime(n),r||e.play()}),e.currentRes=this.resolution;o>0;)if(o--,"vjs-current-res"==s[o].className){s[o].innerHTML=t.res_label(this.resolution);break}e.trigger("changeRes")}},e.ResolutionTitleMenuItem=e.MenuItem.extend({init:function(t,n){e.MenuItem.call(this,t,n),this.off("click")}}),e.ResolutionSelector=e.MenuButton.extend({init:function(t,n){t.availableRes=n.available_res,e.MenuButton.call(this,t,n)}}),e.ResolutionSelector.prototype.createItems=function(){var t,n=this.player(),r=[];r.push(new e.ResolutionTitleMenuItem(n,{el:e.Component.prototype.createEl("li",{className:"vjs-menu-title vjs-res-menu-title",innerHTML:"Quality"})}));for(t in n.availableRes)"length"!=t&&r.push(new e.ResolutionMenuItem(n,{res:t}));return r.sort(function(e,t){return"undefined"==typeof e.resolution?-1:parseInt(t.resolution)-parseInt(e.resolution)}),r},e.plugin("resolutionSelector",function(n){if(this.el().firstChild.canPlayType){for(var r,s,o,l=this,i=l.options().sources,u=i.length,a=t.extend({default_res:null,force_types:!1},n||{}),c={length:0};u>0;)u--,!1 in i[u]||(s=i[u]["data-res"],"object"!=typeof c[s]&&(c[s]=[],c.length++),c[s].push(i[u]));if(a.force_types)for(s in c)if("length"!=s)for(u=a.force_types.length;u>0;){for(u--,r=c[s].length,found_types=0;r>0;)r--,a.force_types[u]===c[s][r].type&&found_types++;if(found_types<a.force_types.length){delete c[s],c.length--;break}}c.length<2||(a.default_res&&c[a.default_res]&&(l.src(c[a.default_res]),l.currentRes=a.default_res),l.getCurrentRes=function(){if("undefined"!=typeof l.currentRes)return l.currentRes;try{return res=l.options().sources[0]["data-res"]}catch(e){return""}},s=l.getCurrentRes(),s&&(s=t.res_label(s)),o=new e.ResolutionSelector(l,{el:e.Component.prototype.createEl(null,{className:"vjs-res-button vjs-menu-button vjs-control",innerHTML:'<div class="vjs-control-content"><span class="vjs-current-res">'+(s||"Quality")+"</span></div>",role:"button","aria-live":"polite",tabIndex:0}),available_res:c}),l.controlBar.resolutionSelector=l.controlBar.addChild(o))}})}(videojs);